<%- include('layout/header') %>
<div class="container">
    <div class="row my-4">
        <div class="col-lg-12">
        
            <% if (message) { %>
               <div class="alert alert-dismissible fade show alert-<%= message.type %>"
                role="alert">
                   <button class="btn-close" type="button" data-bs-dismiss="alert"
                   aria-label="Close"></button>
                   <strong><%= message.message %></strong>
               </div>
           <% } %>
            <div class="table-responsive">
                <% if(roles != '') { %>
                    <table class="table table-striped text-center my-3">
                        <thead>
                            <tr class="table-dark">
                                <th>STT</th>
                                <th>Name</th>                                
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <% roles.forEach((row,index)=>{ %>
                                <tr class="align-middle">
                                    <td><%= index+1 %></td>
                                    <td><%= row.name %></td>
                                    <td>
                                        <a href="/role/edit/<%= row._id %>" class="text-success"><i class="fas fa-edit fa-lg mx-1"></i></a>
                                        <a href="javascript:void(0);" onclick="confirmDelete('/role/deleteRole/<%= row._id %>')" class="text-danger"><i class="fas fa-trash fa-lg mx-1"></i></a>
                                    </td>
                                </tr>
                            

                           <% })  %>
                        </tbody>
                    </table>
                    <% } else { %>
                           <h1 class="text-center text-secondary mt-5">No roles found in the database!</h1>
                        <% } %>
                
            </div>
        </div>
    </div>
</div>

<script>
    function confirmDelete(url) {
        if (confirm("Are you sure you want to delete this role?")) {
            // Chuyển hướng đến URL xóa
            window.location.href = url;
        }
        // Nếu người dùng không xác nhận, không làm gì cả
    }
    </script>
    
<%- include('layout/footer') %>
